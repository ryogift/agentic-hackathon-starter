# シャッフルランチアプリ MVP仕様書

## 1\. 概要 (Overview)

  * **目的:** 社内メンバー間のコミュニケーション促進。
  * **主要機能:** 入力されたメンバーリストを、ルール（3〜4名）に基づきランダムにグループ分けし、行き先（ランチ場所）も提案する。

## 2\. 機能要件 (Functional Requirements)

### 2.1. メンバー入力機能

  * **入力方法:** テキストエリアへの入力（改行区切りで複数名に対応）。
      * *理由:* ExcelやSlackからコピー＆ペーストで一括登録できるようにするため。
  * **バリデーション:** 空行の削除、重複ネームの排除（オプション）。

### 2.2. グループ分けロジック (Core Logic)

  * **ルール:** 1グループあたり**3〜4名**になるように振り分ける。
  * **アルゴリズム方針:**
    1.  参加者リストをランダムにシャッフルする。
    2.  基本は「4名」でグループを作成していく。
    3.  端数が生じた場合の処理：
          * **余りが0名:** 完了
          * **余りが1名:** 最後の4名グループを解体し、5名（4+1）にするか、あるいは「3名・2名」はNGなため、既にある3名グループがあればそこに入れる等の調整が必要。

### 2.3. 行き先決定機能

  * **機能:** グループごとに、事前に登録されたリストからランダムに1店舗を割り当てる。
  * **データ:** アプリ内にデフォルトで数店舗（和食、イタリアン、中華など）を持たせておく。また、ユーザーがテキストエリアで「店舗リスト」を編集できるようにする。

### 2.4. 結果出力機能

  * **表示:** グループ名（A, B, C...）、メンバー名、行き先をカード形式で表示。
  * **コピー機能:** 「結果をクリップボードにコピー」ボタンを設置（Slack貼り付け用）。
      * *フォーマット例:* `[グループA] 佐藤, 鈴木, 田中 @ 中華料理 萬来`

-----

## 3\. 画面仕様 (UI/UX)

画面は1ページのみの構成とします。

### レイアウト構成

1.  **ヘッダー:** アプリ名「Shuffle Lunch」
2.  **入力エリア（左カラム）:**
      * ラベル：「参加者リスト（1行に1名）」
      * テキストエリア（placeholder: 名前を入力...）
      * ラベル：「お店リスト（1行に1店舗）」※アコーディオンで開閉可能にするとスッキリする
      * アクションボタン：「シャッフルする！」（目立つ色で）
3.  **結果エリア（右カラム）:**
      * 初期状態：「メンバーを入力してシャッフルしてください」
      * 実行後：グループごとのカードを表示
      * 機能ボタン：「結果をテキストでコピー」

-----

## 4\. データ構造イメージ (Data Structure)

MVPのため、ローカルステート（メモリ上）のみで管理します。

```json
// 入力データ
{
  "members": ["佐藤", "鈴木", "高橋", "田中", "伊藤", "渡辺", "山本"],
  "restaurants": ["イタリアン A", "定食屋 B", "中華 C", "カレー D"]
}

// 出力データ（シャッフル後）
[
  {
    "groupId": 1,
    "groupName": "Team A",
    "members": ["佐藤", "田中", "山本"],
    "restaurant": "中華 C"
  },
  {
    "groupId": 2,
    "groupName": "Team B",
    "members": ["鈴木", "高橋", "伊藤", "渡辺"],
    "restaurant": "イタリアン A"
  }
]
```

## 5\. ロジック詳細：3〜4名グループ分けの計算式

総人数を `N` としたときの分け方（優先順位）を定義します。

| 総人数 (N) | 分け方 (構成) | 備考 |
| :--- | :--- | :--- |
| **3名** | 3 | 最小催行人数 |
| **4名** | 4 | ベスト |
| **5名** | 5 | 特例（3:2にできないため1グループにする） |
| **6名** | 3 + 3 | |
| **7名** | 4 + 3 | |
| **8名** | 4 + 4 | |
| **9名** | 3 + 3 + 3 | |
| **10名** | 4 + 3 + 3 | |
| **11名** | 4 + 4 + 3 | |

**アルゴリズムの実装方針:**

1.  基本、`N` を 4 で割る。商を `q`、余りを `r` とする。
2.  `r = 0` の場合: 全て4人グループ。
3.  `r = 1` の場合: 4人グループを1つ減らし、3人グループを一気に増やす等の調整を行う（例: 9人→ 4+4+1(NG) → 3+3+3）。
      * *簡易実装:* ループ処理で「残り人数が5人以上の場合は4人を取り出す。残りが5人or6人になったら終了し、そのまま1グループ(5or6人)にするか、3+2(NG)を避けるロジックを通す」のが安全です。
